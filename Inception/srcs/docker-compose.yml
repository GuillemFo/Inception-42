services:	#List of services
	mariadb:	#Name of the service
		container_name: mariadb
		build: ./requirements/mariadb	#path from the image is going to be build from
		image: mariadb	#Name of the image
		volumes:	#Space designated for that container??
		- mariadb_data:/var/lib/mysql
		networks:
			- inception
		env_file:
			- .env
		restart: always	#To prevent hangs	
	wordpress:
		container_name: wordpress
		build: ./requirements/wordpress
		image: wordpress
		volumes:
		- wordpress_data:/var/www/html
		depends_on:
			- mariadb
		env_file:
			- .env
		networks:
			- inception
		restart: always
	
	nginx:
		container_name: nginx
		build: ./requirements/nginx
		image: nginx
		volumes:
		- wordpress_data:/var/www/html
		depends_on:
			- wordpress
		env_file:
			- .env
		networks:
			- inception
		ports:
			- "443:443"
		restart: always
		
		
	volumes:
		mariadb_data:
			driver: local
			driver_opts:
				device: "/home/gfons-s/data/mysql"
				o: bind	#To allow docker to use host folders
				type: none #No need to specify since is a bind mount
		wordpress_data:
			driver: local
			driver_opts:
				device: "/home/gforns-s/data/wordpress"
				o: bind
				type: none

networks:
	inception:
	name: inception
	driver: bridge

